{"ast":null,"code":"import \"core-js/modules/esnext.iterator.map.js\";\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport \"jspdf-autotable\";\nexport default {\n  data() {\n    return {\n      selectedYear: new Date().getFullYear(),\n      availableYears: Array.from({\n        length: 5\n      }, (_, i) => new Date().getFullYear() - i),\n      reportData: []\n    };\n  },\n  methods: {\n    async fetchReport() {\n      try {\n        const response = await axios.get(`/api/reports/inventory`, {\n          params: {\n            year: this.selectedYear\n          }\n        });\n        this.reportData = response.data.data;\n      } catch (error) {\n        console.error(\"Error fetching report:\", error);\n        this.reportData = [];\n      }\n    },\n    downloadPDF() {\n      const doc = new jsPDF();\n\n      // Title\n      doc.setFontSize(18);\n      doc.text(`Inventory Report for ${this.selectedYear}`, 14, 20);\n\n      // Table\n      doc.autoTable({\n        startY: 30,\n        head: [[\"Item Name\", \"Batch Name\", \"Total Added\", \"Total Removed\", \"Net Change\"]],\n        body: this.reportData.map(item => [item.itemName, item.batchName, item.totalAdded, item.totalRemoved, item.netChange])\n      });\n\n      // Save PDF\n      doc.save(`Inventory_Report_${this.selectedYear}.pdf`);\n    }\n  },\n  mounted() {\n    this.fetchReport();\n  }\n};","map":{"version":3,"names":["axios","jsPDF","data","selectedYear","Date","getFullYear","availableYears","Array","from","length","_","i","reportData","methods","fetchReport","response","get","params","year","error","console","downloadPDF","doc","setFontSize","text","autoTable","startY","head","body","map","item","itemName","batchName","totalAdded","totalRemoved","netChange","save","mounted"],"sources":["C:\\Users\\PC07\\Desktop\\MCDL-CLINIC\\frontend\\src\\views\\Reports.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mx-auto px-6 py-8\">\r\n    <h1 class=\"text-gray-700 text-3xl font-medium mb-4\">Yearly Inventory Reports</h1>\r\n    <p class=\"text-gray-600\">View and download inventory reports for each year.</p>\r\n\r\n    <!-- Year Selection -->\r\n    <div class=\"mt-6 flex items-center space-x-4\">\r\n      <label for=\"year\" class=\"text-gray-700 font-medium\">Select Year:</label>\r\n      <select\r\n        id=\"year\"\r\n        v-model=\"selectedYear\"\r\n        @change=\"fetchReport\"\r\n        class=\"block w-32 px-3 py-2 border rounded-md text-gray-700\"\r\n      >\r\n        <option v-for=\"year in availableYears\" :key=\"year\" :value=\"year\">\r\n          {{ year }}\r\n        </option>\r\n      </select>\r\n    </div>\r\n\r\n    <!-- Report Table -->\r\n    <div v-if=\"reportData.length > 0\" class=\"mt-8\">\r\n      <h2 class=\"text-xl font-medium text-gray-700 mb-4\">\r\n        Inventory Report for {{ selectedYear }}\r\n      </h2>\r\n      <table class=\"table-auto w-full text-left border-collapse\">\r\n        <thead>\r\n          <tr class=\"bg-gray-100 text-gray-700\">\r\n            <th class=\"px-4 py-2 border\">Item Name</th>\r\n            <th class=\"px-4 py-2 border\">Batch Name</th>\r\n            <th class=\"px-4 py-2 border\">Total Added</th>\r\n            <th class=\"px-4 py-2 border\">Total Removed</th>\r\n            <th class=\"px-4 py-2 border\">Net Change</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr\r\n            v-for=\"(item, index) in reportData\"\r\n            :key=\"index\"\r\n            class=\"text-gray-600 hover:bg-gray-50\"\r\n          >\r\n            <td class=\"px-4 py-2 border\">{{ item.itemName }}</td>\r\n            <td class=\"px-4 py-2 border\">{{ item.batchName }}</td>\r\n            <td class=\"px-4 py-2 border\">{{ item.totalAdded }}</td>\r\n            <td class=\"px-4 py-2 border\">{{ item.totalRemoved }}</td>\r\n            <td class=\"px-4 py-2 border\">{{ item.netChange }}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n      <!-- Download Button -->\r\n      <button\r\n        @click=\"downloadPDF\"\r\n        class=\"mt-6 px-6 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-500\"\r\n      >\r\n        Download PDF\r\n      </button>\r\n    </div>\r\n\r\n    <!-- No Data Message -->\r\n    <div v-else class=\"mt-8\">\r\n      <p class=\"text-gray-600\">No data available for the selected year.</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport jsPDF from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      selectedYear: new Date().getFullYear(),\r\n      availableYears: Array.from({ length: 5 }, (_, i) => new Date().getFullYear() - i),\r\n      reportData: [],\r\n    };\r\n  },\r\n  methods: {\r\n    async fetchReport() {\r\n      try {\r\n        const response = await axios.get(`/api/reports/inventory`, {\r\n          params: { year: this.selectedYear },\r\n        });\r\n        this.reportData = response.data.data;\r\n      } catch (error) {\r\n        console.error(\"Error fetching report:\", error);\r\n        this.reportData = [];\r\n      }\r\n    },\r\n    downloadPDF() {\r\n      const doc = new jsPDF();\r\n\r\n      // Title\r\n      doc.setFontSize(18);\r\n      doc.text(`Inventory Report for ${this.selectedYear}`, 14, 20);\r\n\r\n      // Table\r\n      doc.autoTable({\r\n        startY: 30,\r\n        head: [[\"Item Name\", \"Batch Name\", \"Total Added\", \"Total Removed\", \"Net Change\"]],\r\n        body: this.reportData.map((item) => [\r\n          item.itemName,\r\n          item.batchName,\r\n          item.totalAdded,\r\n          item.totalRemoved,\r\n          item.netChange,\r\n        ]),\r\n      });\r\n\r\n      // Save PDF\r\n      doc.save(`Inventory_Report_${this.selectedYear}.pdf`);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.fetchReport();\r\n  },\r\n};\r\n</script>\r\n"],"mappings":";AAmEA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAO,iBAAiB;AAExB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,YAAY,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MACtCC,cAAc,EAAEC,KAAK,CAACC,IAAI,CAAC;QAAEC,MAAM,EAAE;MAAE,CAAC,EAAE,CAACC,CAAC,EAAEC,CAAC,KAAK,IAAIP,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,IAAIM,CAAC,CAAC;MACjFC,UAAU,EAAE;IACd,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,WAAWA,CAAA,EAAG;MAClB,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMf,KAAK,CAACgB,GAAG,CAAC,wBAAwB,EAAE;UACzDC,MAAM,EAAE;YAAEC,IAAI,EAAE,IAAI,CAACf;UAAa;QACpC,CAAC,CAAC;QACF,IAAI,CAACS,UAAS,GAAIG,QAAQ,CAACb,IAAI,CAACA,IAAI;MACtC,EAAE,OAAOiB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9C,IAAI,CAACP,UAAS,GAAI,EAAE;MACtB;IACF,CAAC;IACDS,WAAWA,CAAA,EAAG;MACZ,MAAMC,GAAE,GAAI,IAAIrB,KAAK,CAAC,CAAC;;MAEvB;MACAqB,GAAG,CAACC,WAAW,CAAC,EAAE,CAAC;MACnBD,GAAG,CAACE,IAAI,CAAC,wBAAwB,IAAI,CAACrB,YAAY,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;;MAE7D;MACAmB,GAAG,CAACG,SAAS,CAAC;QACZC,MAAM,EAAE,EAAE;QACVC,IAAI,EAAE,CAAC,CAAC,WAAW,EAAE,YAAY,EAAE,aAAa,EAAE,eAAe,EAAE,YAAY,CAAC,CAAC;QACjFC,IAAI,EAAE,IAAI,CAAChB,UAAU,CAACiB,GAAG,CAAEC,IAAI,IAAK,CAClCA,IAAI,CAACC,QAAQ,EACbD,IAAI,CAACE,SAAS,EACdF,IAAI,CAACG,UAAU,EACfH,IAAI,CAACI,YAAY,EACjBJ,IAAI,CAACK,SAAS,CACf;MACH,CAAC,CAAC;;MAEF;MACAb,GAAG,CAACc,IAAI,CAAC,oBAAoB,IAAI,CAACjC,YAAY,MAAM,CAAC;IACvD;EACF,CAAC;EACDkC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACvB,WAAW,CAAC,CAAC;EACpB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}